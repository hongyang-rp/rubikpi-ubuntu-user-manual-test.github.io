"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[5990],{1470:(e,n,s)=>{s.d(n,{A:()=>S});var r=s(6540),d=s(4164),a=s(3104),t=s(6347),i=s(205),c=s(7485),o=s(1682),l=s(679);function u(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:s,default:r}})=>({value:e,label:n,attributes:s,default:r}))}(s);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,s])}function x({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const s=(0,t.W6)(),d=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(d),(0,r.useCallback)(e=>{if(!d)return;const n=new URLSearchParams(s.location.search);n.set(d,e),s.replace({...s.location,search:n.toString()})},[d,s])]}function p(e){const{defaultValue:n,queryString:s=!1,groupId:d}=e,a=h(e),[t,c]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find(e=>e.default)??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:a})),[o,u]=m({queryString:s,groupId:d}),[p,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,d]=(0,l.Dv)(n);return[s,(0,r.useCallback)(e=>{n&&d.set(e)},[n,d])]}({groupId:d}),_=(()=>{const e=o??p;return x({value:e,tabValues:a})?e:null})();(0,i.A)(()=>{_&&c(_)},[_]);return{selectedValue:t,selectValue:(0,r.useCallback)(e=>{if(!x({value:e,tabValues:a}))throw new Error(`Can't select invalid tab value=${e}`);c(e),u(e),f(e)},[u,f,a]),tabValues:a}}var f=s(2303);const _={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=s(4848);function g({className:e,block:n,selectedValue:s,selectValue:r,tabValues:t}){const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),o=e=>{const n=e.currentTarget,d=i.indexOf(n),a=t[d].value;a!==s&&(c(n),r(a))},l=e=>{let n=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const s=i.indexOf(e.currentTarget)+1;n=i[s]??i[0];break}case"ArrowLeft":{const s=i.indexOf(e.currentTarget)-1;n=i[s]??i[i.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,d.A)("tabs",{"tabs--block":n},e),children:t.map(({value:e,label:n,attributes:r})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{i.push(e)},onKeyDown:l,onClick:o,...r,className:(0,d.A)("tabs__item",_.tabItem,r?.className,{"tabs__item--active":s===e}),children:n??e},e))})}function j({lazy:e,children:n,selectedValue:s}){const a=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=a.find(e=>e.props.value===s);return e?(0,r.cloneElement)(e,{className:(0,d.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:a.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s}))})}function v(e){const n=p(e);return(0,b.jsxs)("div",{className:(0,d.A)("tabs-container",_.tabList),children:[(0,b.jsx)(g,{...n,...e}),(0,b.jsx)(j,{...n,...e})]})}function S(e){const n=(0,f.A)();return(0,b.jsx)(v,{...e,children:u(e.children)},String(n))}},5117:(e,n,s)=>{s.d(n,{A:()=>r});const r=s.p+"assets/images/image-125-f8c3c5533751ddd8dfbfc4bd201144f5.png"},8453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>i});var r=s(6540);const d={},a=r.createContext(d);function t(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(d):e.components||d:t(e.components),r.createElement(a.Provider,{value:n},e.children)}},9365:(e,n,s)=>{s.d(n,{A:()=>t});s(6540);var r=s(4164);const d={tabItem:"tabItem_Ymn6"};var a=s(4848);function t({children:e,hidden:n,className:s}){return(0,a.jsx)("div",{role:"tabpanel",className:(0,r.A)(d.tabItem,s),hidden:n,children:e})}},9796:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>x,frontMatter:()=>c,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"Document Home/\u5916\u8bbe\u4e0e\u63a5\u53e3/USB","title":"USB","description":"\u901a\u7528\u4e32\u884c\u603b\u7ebf (USB) \u662f\u4e00\u79cd\u884c\u4e1a\u6807\u51c6\uff0c\u5141\u8bb8\u5728\u5404\u79cd\u7c7b\u578b\u7684\u7535\u5b50\u8bbe\u5907\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u548c\u4f9b\u7535\u3002\u8be5\u6807\u51c6\u652f\u6301\u591a\u79cd\u8fd0\u884c\u901f\u5ea6\uff0c\u4f8b\u5982 1.5 Mbps \u4f4e\u901f\u300112 Mbps \u5168\u901f\u3001480 Mbps \u9ad8\u901f\u4ee5\u53ca 5 Gbps \u8d85\u9ad8\u901f\u548c 10 Gbps \u8d85\u9ad8\u901f Plus\u3002","source":"@site/docs/Document Home/2.\u5916\u8bbe\u4e0e\u63a5\u53e3/2.USB.md","sourceDirName":"Document Home/2.\u5916\u8bbe\u4e0e\u63a5\u53e3","slug":"/Document Home/\u5916\u8bbe\u4e0e\u63a5\u53e3/USB","permalink":"/rubikpi-ubuntu-user-manual-test.github.io/docs/Document Home/\u5916\u8bbe\u4e0e\u63a5\u53e3/USB","draft":false,"unlisted":false,"editUrl":"https://github.com/hongyang-rp/rubikpi-ubuntu-user-manual-test.github.io/tree/main/docs/Document Home/2.\u5916\u8bbe\u4e0e\u63a5\u53e3/2.USB.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"\u5916\u8bbe\u4e0e\u63a5\u53e3","permalink":"/rubikpi-ubuntu-user-manual-test.github.io/docs/Document Home/\u5916\u8bbe\u4e0e\u63a5\u53e3/"},"next":{"title":"\u76f8\u673a\u4e32\u884c\u63a5\u53e3\uff08CSI\uff09","permalink":"/rubikpi-ubuntu-user-manual-test.github.io/docs/Document Home/\u5916\u8bbe\u4e0e\u63a5\u53e3/CSI"}}');var d=s(4848),a=s(8453),t=s(1470),i=s(9365);const c={},o="USB",l={},u=[{value:"USB \u63a5\u53e3\u529f\u80fd\u9a8c\u8bc1",id:"usb-\u63a5\u53e3\u529f\u80fd\u9a8c\u8bc1",level:2},{value:"USB \u8c03\u8bd5",id:"usb-\u8c03\u8bd5",level:2},{value:"USB \u8ddf\u8e2a",id:"usb-\u8ddf\u8e2a",level:3},{value:"USB \u5bc4\u5b58\u5668\u6253\u5370",id:"usb-\u5bc4\u5b58\u5668\u6253\u5370",level:3},{value:"\u4e3b\u673a sysfs \u67e5\u8be2",id:"\u4e3b\u673a-sysfs-\u67e5\u8be2",level:3}];function h(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(n.header,{children:(0,d.jsx)(n.h1,{id:"usb",children:"USB"})}),"\n",(0,d.jsx)(n.p,{children:"\u901a\u7528\u4e32\u884c\u603b\u7ebf (USB) \u662f\u4e00\u79cd\u884c\u4e1a\u6807\u51c6\uff0c\u5141\u8bb8\u5728\u5404\u79cd\u7c7b\u578b\u7684\u7535\u5b50\u8bbe\u5907\u4e4b\u95f4\u8fdb\u884c\u6570\u636e\u4ea4\u6362\u548c\u4f9b\u7535\u3002\u8be5\u6807\u51c6\u652f\u6301\u591a\u79cd\u8fd0\u884c\u901f\u5ea6\uff0c\u4f8b\u5982 1.5 Mbps \u4f4e\u901f\u300112 Mbps \u5168\u901f\u3001480 Mbps \u9ad8\u901f\u4ee5\u53ca 5 Gbps \u8d85\u9ad8\u901f\u548c 10 Gbps \u8d85\u9ad8\u901f Plus\u3002"}),"\n",(0,d.jsx)(n.p,{children:"RUBIK Pi 3 \u62e5\u6709 4 \u4e2a USB \u53e3\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e24\u4e2a USB 3.0 A \u53e3\uff0c\u53ea\u80fd\u4f5c\u4e3a\u4e3b\u673a\u6a21\u5f0f\u4f7f\u7528\uff0c\u5982\u4e0b\u56fe 7\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e00\u4e2a USB 2.0 A \u53e3\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e3b\u673a\u6216\u8bbe\u5907\u6a21\u5f0f\u4f7f\u7528\uff0c\u5982\u4e0b\u56fe 6\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u4e00\u4e2a USB 3.1 Gen 1 C \u53e3\uff0c\u53ef\u4ee5\u4f5c\u4e3a\u4e3b\u673a\u6216\u8bbe\u5907\u6a21\u5f0f\uff08\u5e38\u7528\u4e8e ADB\uff09\uff0c\u4ee5\u53ca DP \u663e\u793a\u4f7f\u7528\uff0c\u5982\u4e0b\u56fe 5\u3002"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.img,{src:s(5117).A+"",width:"924",height:"730"})}),"\n",(0,d.jsx)(n.h2,{id:"usb-\u63a5\u53e3\u529f\u80fd\u9a8c\u8bc1",children:"USB \u63a5\u53e3\u529f\u80fd\u9a8c\u8bc1"}),"\n",(0,d.jsxs)(t.A,{children:[(0,d.jsxs)(i.A,{value:"USB CAM",label:"USB \u6444\u50cf\u5934",default:!0,children:[(0,d.jsxs)(n.p,{children:["\u9b54\u65b9\u6d3e 3 \u8bbe\u5907\u4e3a\u7b26\u5408 USB \u89c6\u9891\u7c7b\uff08UVC\uff09\u6807\u51c6\u7684 USB \u7f51\u7edc\u6444\u50cf\u5934\u63d0\u4f9b\u9a71\u52a8\u7a0b\u5e8f\u652f\u6301\u3002Linux \u5185\u6838\u7684 ",(0,d.jsx)(n.code,{children:"uvcvideo"})," \u9a71\u52a8\u7a0b\u5e8f\u652f\u6301\u6444\u50cf\u5934\u3002\u6709\u5173 ",(0,d.jsx)(n.code,{children:"uvcvideo"})," \u9a71\u52a8\u7a0b\u5e8f\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ",(0,d.jsx)(n.a,{href:"https://www.kernel.org/doc/html/v4.19/media/v4l-drivers/uvcvideo.html%E3%80%82",children:"https://www.kernel.org/doc/html/v4.19/media/v4l-drivers/uvcvideo.html\u3002"})]}),(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"uvcvideo"})," \u9a71\u52a8\u7a0b\u5e8f\u5c06\u8fd9\u7c7b\u6444\u50cf\u5934\u4f5c\u4e3a V4L2 \u89c6\u9891\u8bbe\u5907\uff08\u53ef\u901a\u8fc7\u5b57\u7b26\u8bbe\u5907\u8282\u70b9\uff08\u5982 /dev/videoX\uff09\u8fdb\u884c\u8bbf\u95ee\uff09\u516c\u5f00\u3002"]}),(0,d.jsxs)(n.p,{children:["\u5728\u7528\u6237\u7a7a\u95f4\u4e2d\uff0c\u5e94\u7528\u7a0b\u5e8f\u53ef\u4ee5\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"v4l2src"})," GStreamer \u63d2\u4ef6\u7ba1\u7406 USB \u6444\u50cf\u5934\uff0c\u8be5\u63d2\u4ef6\u4e0e Qualcomm \u667a\u80fd\u591a\u5a92\u4f53 SDK (QIM SDK) \u6346\u7ed1\u5728\u4e00\u8d77\u3002\u6b64\u5916\uff0cYavta\uff08\u53c8\u4e00\u4e2a V4L2 \u6d4b\u8bd5\u5e94\u7528\u7a0b\u5e8f\uff09\u7b49\u7a0b\u5e8f\u53ef\u4ee5\u76f4\u63a5\u4e0e V4L2\uff08Video4Linux2\uff09\u63a5\u53e3\u4ea4\u4e92\uff0c\u4ee5\u6d4b\u8bd5\u548c\u63a7\u5236\u6444\u50cf\u5934\u8bbe\u5907\u3002"]}),(0,d.jsx)(n.p,{children:"\u5b89\u88c5 Yavta"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"sudo apt install yavta\n"})}),(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u524d\u63d0\u6761\u4ef6\uff1a\u83b7\u53d6\u56fe\u50cf\u683c\u5f0f\u5927\u5c0f"})}),(0,d.jsx)(n.p,{children:"\u8981\u901a\u8fc7 Yavta \u6216 GStreamer \u914d\u7f6e USB \u6444\u50cf\u5934\uff0c\u5fc5\u987b\u6267\u884c\u4ee5\u4e0b\u6b65\u9aa4\u3002"}),(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u8981\u4e86\u89e3\u679a\u4e3e\u8be6\u7ec6\u4fe1\u606f\uff0c\u5e94\u63d2\u5165 USB \u6444\u50cf\u5934\u5e76\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"lsusb\n"})}),(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Bus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\nBus 001 Device 003: ID 1bcf:0215 Sunplus Innovation Technology Inc. 4K AutoFocus Webcam\nBus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\nBus 002 Device 002: ID 0b95:1790 ASIX Electronics Corp. AX88179 Gigabit Ethernet\nBus 003 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n"})}),(0,d.jsxs)(n.ol,{start:"2",children:["\n",(0,d.jsx)(n.li,{children:"USB \u6444\u50cf\u5934\u63d2\u5165\u524d\u540e\uff0c\u5728\u9b54\u65b9\u6d3e 3 \u7684\u7ec8\u7aef\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff0c\u6839\u636e\u4e24\u6b21\u7ed3\u679c\u7684\u5dee\u5f02\u53ef\u4ee5\u786e\u5b9a USB \u6444\u50cf\u5934\u89c6\u9891\u8282\u70b9\u3002"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls /dev/video*\n"})}),(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"root@rubikpi:/sys/bus/pci# ls /dev/video*\n/dev/video0  /dev/video1  /dev/video32  /dev/video33\nroot@rubikpi:/sys/bus/pci# ls /dev/video*\n/dev/video0  /dev/video1  /dev/video2  /dev/video3  /dev/video32  /dev/video33\n"})}),(0,d.jsxs)(n.p,{children:["\u5982\u4e0a\u6240\u793a\uff0cUSB \u6444\u50cf\u5934\u7684\u8282\u70b9\u4e3a ",(0,d.jsx)(n.em,{children:"video2"})," \u548c ",(0,d.jsx)(n.em,{children:"video3"}),"\u3002"]}),(0,d.jsxs)(n.ol,{start:"3",children:["\n",(0,d.jsx)(n.li,{children:"\u8981\u4f7f\u7528 Yavta \u67e5\u770b\u652f\u6301\u7684\u8f93\u51fa\u683c\u5f0f\u548c\u5927\u5c0f\uff0c\u5e94\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"yavta /dev/video2 --enum-formats\n"})}),(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Device /dev/video3 opened.\nDevice `4K AutoFocus Webcam: 4K AutoFoc' on `usb-0000:01:00.0-1' (driver 'uvcvideo') supports meta-d.\n- Available formats:\n        Format 0: UVCH (48435655)\n        Type: Meta-data capture (13)\n        Name: UVC Payload Header Metadata\n\nMeta-data format: UVCH (48435655) buffer size 10240\nubuntu@rubikpi:~$ yavta /dev/video2 --enum-formats\nDevice /dev/video2 opened.\nDevice `4K AutoFocus Webcam: 4K AutoFoc' on `usb-0000:01:00.0-1' (driver 'uvcvideo') supports video,.\n- Available formats:\n        Format 0: MJPEG (47504a4d)\n        Type: Video capture (1)\n        Name: Motion-JPEG\n        Frame size: 1920x1080 (1/30, 1/30)\n        Frame size: 1280x720 (1/30)\n        Frame size: 1600x900 (1/30)\n        Frame size: 2304x1296 (1/30)\n        Frame size: 2560x1440 (1/30)\n        Frame size: 2688x1512 (1/30)\n        Frame size: 3840x2160 (1/25)\n        Frame size: 640x360 (1/30)\n        Frame size: 800x450 (1/30)\n        Frame size: 848x480 (1/30)\n        Frame size: 960x540 (1/30)\n        Frame size: 1024x576 (1/30)\n        Frame size: 640x480 (1/30)\n        Frame size: 800x600 (1/30)\n        Frame size: 960x720 (1/30)\n        Frame size: 1024x768 (1/30)\n        Frame size: 1280x960 (1/30)\n        Frame size: 1600x1200 (1/30)\n        Frame size: 2048x1536 (1/30)\n        Frame size: 2592x1944 (1/30)\n        Frame size: 1920x1080 (1/30, 1/30)\n\n        Format 1: YUYV (56595559)\n        Type: Video capture (1)\n        Name: YUYV 4:2:2\n        Frame size: 1920x1080 (1/5, 1/5)\n        Frame size: 1280x720 (1/10)\n        Frame size: 1600x900 (1/5)\n        Frame size: 640x360 (1/30)\n        Frame size: 800x450 (1/20)\n        Frame size: 848x480 (1/20)\n        Frame size: 960x540 (1/20)\n        Frame size: 1024x576 (1/15)\n        Frame size: 640x480 (1/30)\n        Frame size: 800x600 (1/20)\n        Frame size: 960x720 (1/15)\n        Frame size: 1024x768 (1/10)\n        Frame size: 1280x960 (2/15)\n        Frame size: 1600x1200 (1/5)\n        Frame size: 1920x1080 (1/5, 1/5)\n\nVideo format: MJPEG (47504a4d) 1920x1080 (stride 0) field none buffer size 4147200\n"})}),(0,d.jsxs)(n.ol,{start:"4",children:["\n",(0,d.jsx)(n.li,{children:"\u4ece\u7b2c 3 \u6b65\u7684\u663e\u793a\u7ed3\u679c\u4e2d\u9009\u62e9\u6240\u9700\u7684\u56fe\u50cf\u683c\u5f0f\u548c\u5927\u5c0f\u3002"}),"\n"]}),(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u4f7f\u7528 Yavta \u914d\u7f6e USB \u6444\u50cf\u5934"})}),(0,d.jsx)(n.p,{children:"\u524d\u63d0\u6761\u4ef6\uff1aUSB \u6444\u50cf\u5934\u8f93\u51fa\u683c\u5f0f\u548c\u5927\u5c0f\u5df2\u786e\u5b9a\u3002"}),(0,d.jsx)(n.p,{children:"\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4fbf\u9009\u62e9 1920x1080 \u8f93\u51fa\u5c3a\u5bf8\u548c 30 fps \u7684 MJPEG \u683c\u5f0f\uff0c\u5728 /tmp/ \u4e0b\u91c7\u96c6 10 \u5e27\uff0c\u6587\u4ef6\u540d\u4e3a testmjpeg-00000*.bin\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"yavta -f MJPEG -s 1920x1080 -t 1/30 -c10 -F/tmp/testmjpeg /dev/video2\n"})}),(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Device /dev/video2 opened.\nDevice `4K AutoFocus Webcam: 4K AutoFoc' on `usb-0000:01:00.0-1' (driver 'uvcvideo') supports video, capture, without mplanes.\nVideo format set: MJPEG (47504a4d) 1920x1080 (stride 0) field none buffer size 4147200\nVideo format: MJPEG (47504a4d) 1920x1080 (stride 0) field none buffer size 4147200\nCurrent frame rate: 1/30\nSetting frame rate to: 1/30\nFrame rate set: 1/30\n8 buffers requested.\nlength: 4147200 offset: 0 timestamp type/source: mono/SoE\nBuffer 0/0 mapped at address 0xffffa5e5b000.\nlength: 4147200 offset: 32768 timestamp type/source: mono/SoE\nBuffer 1/0 mapped at address 0xffffa5a66000.\nlength: 4147200 offset: 65536 timestamp type/source: mono/SoE\nBuffer 2/0 mapped at address 0xffffa5671000.\nlength: 4147200 offset: 98304 timestamp type/source: mono/SoE\nBuffer 3/0 mapped at address 0xffffa527c000.\nlength: 4147200 offset: 131072 timestamp type/source: mono/SoE\nBuffer 4/0 mapped at address 0xffffa4e87000.\nlength: 4147200 offset: 163840 timestamp type/source: mono/SoE\nBuffer 5/0 mapped at address 0xffffa4a92000.\nlength: 4147200 offset: 196608 timestamp type/source: mono/SoE\nBuffer 6/0 mapped at address 0xffffa469d000.\nlength: 4147200 offset: 229376 timestamp type/source: mono/SoE\nBuffer 7/0 mapped at address 0xffffa42a8000.\n0 (0) [-] none 0 115283 B 53.095060 53.647782 244.260 fps ts mono/SoE\n1 (1) [-] none 1 115277 B 53.647091 53.679768 1.811 fps ts mono/SoE\n2 (2) [-] none 2 115376 B 53.683085 53.715810 27.782 fps ts mono/SoE\n3 (3) [-] none 3 115545 B 53.715105 53.747738 31.230 fps ts mono/SoE\n4 (4) [-] none 4 117998 B 53.747096 53.783769 31.259 fps ts mono/SoE\n5 (5) [-] none 5 117962 B 53.783089 53.815715 27.783 fps ts mono/SoE\n6 (6) [-] none 6 118127 B 53.815088 53.847740 31.251 fps ts mono/SoE\n7 (7) [-] none 7 118027 B 53.847099 53.883764 31.239 fps ts mono/SoE\n8 (0) [-] none 8 119080 B 53.883084 53.915721 27.789 fps ts mono/SoE\n9 (1) [-] none 9 119399 B 53.915093 53.947736 31.241 fps ts mono/SoE\nCaptured 10 frames in 0.856770 seconds (11.671741 fps, 1368014.420968 B/s).\n8 buffers released.\n\n"})}),(0,d.jsx)(n.p,{children:"\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4fbf\u9009\u62e9 1280x960 \u8f93\u51fa\u5c3a\u5bf8\u300115 fps \u7684 YUV \u683c\u5f0f\uff0c\u5728 /tmp/ \u4e0b\u91c7\u96c6 10 \u5e27\uff0c\u751f\u6210\u7684\u6587\u4ef6\u540d\u4e3a testyuv-00000*.bin\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"yavta -f YUYV -s 1280x720 -t 1/15 -c10 -F/tmp/testyuv /dev/video2\n"})}),(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Device /dev/video2 opened.\nDevice `4K AutoFocus Webcam: 4K AutoFoc' on `usb-0000:01:00.0-1' (driver 'uvcvideo') supports video,.\nVideo format set: YUYV (56595559) 1280x720 (stride 2560) field none buffer size 1843200\nVideo format: YUYV (56595559) 1280x720 (stride 2560) field none buffer size 1843200\nCurrent frame rate: 1/10\nSetting frame rate to: 1/15\nFrame rate set: 1/10\n8 buffers requested.\nlength: 1843200 offset: 0 timestamp type/source: mono/SoE\nBuffer 0/0 mapped at address 0xffff966ce000.\nlength: 1843200 offset: 32768 timestamp type/source: mono/SoE\nBuffer 1/0 mapped at address 0xffff9650c000.\nlength: 1843200 offset: 65536 timestamp type/source: mono/SoE\nBuffer 2/0 mapped at address 0xffff9634a000.\nlength: 1843200 offset: 98304 timestamp type/source: mono/SoE\nBuffer 3/0 mapped at address 0xffff96188000.\nlength: 1843200 offset: 131072 timestamp type/source: mono/SoE\nBuffer 4/0 mapped at address 0xffff95fc6000.\nlength: 1843200 offset: 163840 timestamp type/source: mono/SoE\nBuffer 5/0 mapped at address 0xffff95e04000.\nlength: 1843200 offset: 196608 timestamp type/source: mono/SoE\nBuffer 6/0 mapped at address 0xffff95c42000.\nlength: 1843200 offset: 229376 timestamp type/source: mono/SoE\nBuffer 7/0 mapped at address 0xffff95a80000.\n0 (0) [-] none 0 1843200 B 364.737849 364.966754 2.174 fps ts mono/SoE\n1 (1) [-] none 1 1843200 B 364.966042 365.066785 4.382 fps ts mono/SoE\n2 (2) [-] none 2 1843200 B 365.066087 365.166812 9.996 fps ts mono/SoE\n3 (3) [-] none 3 1843200 B 365.166149 365.266862 9.994 fps ts mono/SoE\n4 (4) [-] none 4 1843200 B 365.266205 365.366929 9.994 fps ts mono/SoE\n5 (5) [-] none 5 1843200 B 365.366266 365.466985 9.994 fps ts mono/SoE\n6 (6) [-] none 6 1843200 B 365.466326 365.567108 9.994 fps ts mono/SoE\n7 (7) [-] none 7 1843200 B 365.566381 365.667099 9.995 fps ts mono/SoE\n8 (0) [-] none 8 1843200 B 365.666440 365.767150 9.994 fps ts mono/SoE\n9 (1) [-] none 9 1843200 B 365.766496 365.867212 9.994 fps ts mono/SoE\nCaptured 10 frames in 1.589346 seconds (6.291895 fps, 11597220.863435 B/s).\n8 buffers released.\n"})}),(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u4f7f\u7528 Qualcomm IM SDK \u4e2d\u7684 GStreamer \u914d\u7f6e USB \u6444\u50cf\u5934"})}),(0,d.jsxs)(n.p,{children:["Qualcomm IM SDK \u91c7\u7528\u5f00\u6e90\u591a\u5a92\u4f53\u6846\u67b6 ",(0,d.jsx)(n.a,{href:"https://gstreamer.freedesktop.org/",children:"GStreamer"})," \u516c\u5f00\u4e86\u591a\u5a92\u4f53\u548c\u673a\u5668\u5b66\u4e60\u8fd9\u4e24\u4e2a\u9886\u57df\u7b80\u6d01\u7684 API \u548c\u6613\u7528\u7684\u63d2\u4ef6\u3002\u6709\u5173\u5b89\u88c5 Qualcomm IM SDK \u7684\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605 ",(0,d.jsx)(n.a,{href:"/rubikpi-ubuntu-user-manual-test.github.io/docs/Document%20Home/%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8/%E8%BF%90%E8%A1%8C%E7%A4%BA%E4%BE%8B%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F#runmediaapp",children:"\u5feb\u901f\u5f00\u59cb"})," \u90e8\u5206\u3002"]}),(0,d.jsx)(n.p,{children:"Qualcomm IM SDK \u5305\u542b v4l2src \u63d2\u4ef6\uff0c\u8be5\u63d2\u4ef6\u5141\u8bb8\u4ee5\u9009\u5b9a\u7684\u683c\u5f0f\u4ece USB \u6444\u50cf\u5934\u8fdb\u884c\u8f93\u5165\u3002waylandsink \u63d2\u4ef6\u8d1f\u8d23\u5728 Wayland \u663e\u793a\u754c\u9762\u4e0a\u6e32\u67d3\u89c6\u9891\u8f93\u51fa\u3002"}),(0,d.jsx)(n.p,{children:"\u524d\u63d0\u6761\u4ef6\uff1aUSB \u6444\u50cf\u5934\u8f93\u51fa\u683c\u5f0f\u548c\u5927\u5c0f\u5df2\u786e\u5b9a\u3002"}),(0,d.jsxs)(n.ol,{children:["\n",(0,d.jsx)(n.li,{children:"\u8981\u8bbe\u7f6e Wayland \u663e\u793a\u754c\u9762\u7684\u73af\u5883\u53d8\u91cf\uff0c\u5728\u9b54\u65b9\u6d3e 3 \u7ec8\u7aef\u4e2d\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"export XDG_RUNTIME_DIR=/dev/socket/weston && export WAYLAND_DISPLAY=wayland-1\n"})}),(0,d.jsxs)(n.p,{children:["2.\u4f7f\u7528 GStreamer \u547d\u4ee4\u5c06\u6444\u50cf\u5934\u62cd\u6444\u7684\u89c6\u9891\u6d41\u4f20\u8f93\u5230 UI\u3002\u786e\u4fdd\u5df2\u8bbe\u7f6e\u5408\u9002\u7684\u8bbe\u5907 ID (",(0,d.jsx)(n.em,{children:"/dev/videoX"}),")\uff0c\u5e76\u6839\u636e\u68c0\u6d4b\u5230\u7684 USB \u6444\u50cf\u5934\u9009\u62e9\u6b63\u786e\u7684\u683c\u5f0f\u3002"]}),(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.p,{children:["\u5728 GStreamer \u4e2d\uff0cYUYV \u989c\u8272\u683c\u5f0f\u88ab\u79f0\u4e3a YUY2\u3002\u56e0\u6b64\uff0c\u60a8\u5fc5\u987b\u5728\u8bbe\u7f6e\u7ba1\u9053\u65f6\u6307\u5b9a YUYV \u683c\u5f0f\u5e76\u5728 caps \u8fc7\u6ee4\u5668\u4e2d\u4f7f\u7528 ",(0,d.jsx)(n.strong,{children:"YUY2"}),"\u3002"]})}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5bf9\u4e8e 720p\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:'gst-launch-1.0 -e v4l2src io-mode=dmabuf-import device="/dev/video0" ! video/x-raw,format=YUY2,width=1280,height=720,framerate=10/1 ! waylandsink fullscreen=true\n'})}),(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{children:"Y2,width=1280,height=720,framerate=10/1 ! waylandsink fullscreen=true\nSetting pipeline to PAUSED ...\nI/Adreno-UNKNOWN (1985,1985): <ReadGpuID:357>: Reading chip ID through GSL\nGBM_INFO::msmgbm_mapper(262)::gbm mapper instantiated\ngbm_create_device(224): Info: backend name is: msm_drm\nPipeline is live and does not need PREROLL ...\nPipeline is PREROLLED ...\nSetting pipeline to PLAYING ...\nNew clock: GstSystemClock\ngbm_create_device(224): Info: backend name is: msm_drm\nGBM_ERR::msmgbm_bo_create(870)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for data fd errono: 22 (Invalid argument) drm fd: 24 data fd: 26\n GBM_ERR::msmgbm_bo_create(923)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for metadata fd errono: 22 (Invalid argument) drm fd: 24 metadata fd: 27\nGBM_ERR::msmgbm_bo_create(870)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for data fd errono: 22 (Invalid argument) drm fd: 24 data fd: 29\nGBM_ERR::msmgbm_bo_create(923)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for metadata fd errono: 22 (Invalid argument) drm fd: 24 metadata fd: 30\nGBM_ERR::msmgbm_bo_create(870)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for data fd errono: 22 (Invalid argument) drm fd: 24 data fd: 32\nGBM_ERR::msmgbm_bo_create(923)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for metadata fd errono: 22 (Invalid argument) drm fd: 24 metadata fd: 33\nGBM_ERR::msmgbm_bo_create(870)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for data fd errono: 22 (Invalid argument) drm fd: 24 data fd: 35\nGBM_ERR::msmgbm_bo_create(923)::DRM_IOCTL_PRIME_FD_TO_HANDLE failed for metadata fd errono: 22 (Invalid argument) drm fd: 24 metadata fd: 36\nRedistribute latency...\n0:00:47.7 / 99:99:99.\n"})}),(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsx)(n.li,{children:"\u5bf9\u4e8e 1080p\uff0c\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff1a"}),"\n"]}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:'gst-launch-1.0 -e v4l2src io-mode=dmabuf-import device="/dev/video0" ! video/x-raw,format=YUY2,width=1920,height=1080,framerate=5/1 ! waylandsink fullscreen=true\n'})})]}),(0,d.jsxs)(i.A,{value:"USB Custom",label:"\u81ea\u5b9a\u4e49 USB \u8bbe\u5907",default:!0,children:[(0,d.jsx)(n.p,{children:"\u81ea\u5b9a\u4e49 USB \u8bbe\u5907\uff08device \u6a21\u5f0f\uff09,\u5728\u9b54\u65b9\u6d3e\u4e2d\uff0c\u53ea\u6709 USB 2.0 A \u53e3\u548c USB 3.1 C \u53e3\u652f\u6301, \u4e0b\u9762\u4ee5 USB 3.1 C \u53e3\u4e3a\u4f8b\u3002"}),(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u5177\u6709 diag \u548c ADB \u63a5\u53e3\u7684 USB \u590d\u5408\u8bbe\u5907\u7684 shell \u811a\u672c\u793a\u4f8b"})}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:'cd /sys/kernel/config/usb_gadget/adb\necho on > /sys/bus/platform/devices/a600000.usb/power/control\necho "" > UDC\nmkdir functions/ffs.diag\necho "QCOM" > strings/0x409/manufacturer\necho 0x05c6 > idVendor\necho 0x901d > idProduct\necho "Diag_ADB" > configs/c.1/strings/0x409/configuration\n\nif [ ! -d /dev/ffs-diag ]; then\nmkdir -p /dev/ffs-diag\nfi\nif [ ! -e /dev/ffs-diag/ep0 ]; then\nmount -o uid=2000,gid=2000 -t functionfs diag /dev/ffs-diag\nfi\n\n/usr/bin/diag-router &\n\ncd configs/c.1\nrm -r ffs.usb0\nln -s ../../functions/ffs.diag f1\nln -s ../../functions/ffs.usb0 f2\ncd ../../ udcname=`ls -1 /sys/class/udc | head -n 1`\necho $udcname > UDC\necho auto > /sys/bus/platform/devices/a600000.usb/power/control\n'})}),(0,d.jsx)(n.p,{children:(0,d.jsx)(n.strong,{children:"\u6a21\u62df U \u76d8"})}),(0,d.jsx)(n.p,{children:"\u5728\u9b54\u65b9\u6d3e 3 \u4e2d\u6267\u884c\u5982\u4e0b\u64cd\u4f5c\uff0c\u5c06\u9b54\u65b9\u6d3e\u6a21\u62df\u4e3a\u4e00\u4e2a 2G \u7684 U \u76d8\u3002"}),(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:'sudo -i\ncd /sys/kernel/config/usb_gadget/  #\u5728\u4e32\u53e3\u7ec8\u7aef\u767b\u5f55\u6216\u5728 Terminal \u5e94\u7528\u4e2d\uff0c\u6267\u884c\u4e0b\u9762\u547d\u4ee4\nmkdir g1\ncd g1\nmkdir functions/mass_storage.0\ndd if=/dev/zero of=/tmp/test.iso bs=1M count=2048  #\u521b\u5efa\u5927\u5c0f\u4e3a2G\u7684U\u76d8\u7a7a\u95f4\nmkfs.ext4 /tmp/test.iso\necho "/tmp/test.iso" > functions/mass_storage.0/lun.0/file\nmkdir configs/c.1\nln -s functions/mass_storage.0/ configs/c.1/f3\nmount -t debugfs none /sys/kernel/debug/\n\necho device > /sys/kernel/debug/usb/8c00000.usb/qcom_usb2_0_mode  #\u5c06USB\u5207\u6362\u4e3adevice\u6a21\u5f0f\necho 8c00000.usb > UDC #\u8fde\u63a5USB\u7ebf\u5230\u4e3b\u673a\uff0cU\u76d8\u88ab\u8bc6\u522b \u53ef\u5728U\u76d8\u5185\u5199\u5165\u548c\u5199\u51fa\u6587\u4ef6\n\necho host > /sys/kernel/debug/usb/8c00000.usb/qcom_usb2_0_mode  #\u62d4\u6389USB\u7ebf\uff0c\u5207\u6362\u4e3a\u4e3b\u673a\u6a21\u5f0f\n'})})]})]}),"\n",(0,d.jsx)(n.h2,{id:"usb-\u8c03\u8bd5",children:"USB \u8c03\u8bd5"}),"\n",(0,d.jsxs)(n.p,{children:["\u672c\u8282\u63d0\u4f9b\u6709\u5173\u83b7\u53d6\u8c03\u8bd5\u65e5\u5fd7\u7684\u5404\u79cd\u65b9\u6cd5\u7684\u4fe1\u606f\u3002\u8c03\u8bd5\u65b9\u5f0f\u6709 ",(0,d.jsx)(n.code,{children:"regdumps"})," \u3001\u8c03\u8bd5 ",(0,d.jsx)(n.code,{children:"ftraces"})," \u3001 ",(0,d.jsx)(n.code,{children:"configfs"})," \u8282\u70b9\u7b49\u3002\u5728\u8c03\u8bd5\u4e0e\u8fdb\u5165/\u9000\u51fa\u4f4e\u529f\u8017\u6a21\u5f0f\u3001SMMU \u6545\u969c\u3001\u65e0\u65f6\u949f\u8bbf\u95ee\u76f8\u5173\u7684\u95ee\u9898\u65f6\uff0c\u53ef\u901a\u8fc7\u4e0a\u8ff0\u65e5\u5fd7\u67e5\u770b\u4e8b\u4ef6\u548c\u63a7\u5236\u5668\u72b6\u6001\u7684\u8be6\u7ec6\u4fe1\u606f\u3002"]}),"\n",(0,d.jsxs)(n.admonition,{type:"note",children:[(0,d.jsx)(n.p,{children:"\u4e0b\u9762\u547d\u4ee4\u9700\u5207\u6362\u5230 root \u7528\u6237\uff1a"}),(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u6267\u884c ",(0,d.jsx)(n.code,{children:"sudo passwd root"})," \u547d\u4ee4\u6839\u636e\u63d0\u793a\u4fee\u6539 root \u5e10\u53f7\u5bc6\u7801\uff0c\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"su root"})," \u547d\u4ee4\u5207\u6362\u5230 root \u7528\u6237\u3002"]}),"\n"]})]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["USB 2.0 Type-A \u8bbe\u5907\u8def\u5f84\uff1a",(0,d.jsxs)(n.em,{children:[" /sys/devices/platform/soc@0/",(0,d.jsx)(n.strong,{children:"8c00000"}),".usb/xhci-hcd.1.auto/usb3/"]})]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"USB 3.0 Type-A \u8bbe\u5907\u8def\u5f84\uff1a"}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.em,{children:["/sys/devices/platform/soc@0/",(0,d.jsx)(n.strong,{children:"1c00000"}),".pci/pci0000:00/0000:00:00.0/0000:",(0,d.jsx)(n.strong,{children:"01:00.0"}),"/usb1"]})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:(0,d.jsxs)(n.em,{children:["/sys/devices/platform/soc@0/",(0,d.jsx)(n.strong,{children:"1c00000"}),".pci/pci0000:00/0000:00:00.0/0000:",(0,d.jsx)(n.strong,{children:"01:00.0"}),"/usb2"]})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsxs)(n.p,{children:["USB 3.1 Type-C \u8bbe\u5907\u8def\u5f84\uff1a",(0,d.jsxs)(n.em,{children:["/sys/devices/platform/soc@0/",(0,d.jsx)(n.strong,{children:"a600000"}),".usb"]})," "]}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.h3,{id:"usb-\u8ddf\u8e2a",children:"USB \u8ddf\u8e2a"}),"\n",(0,d.jsxs)(n.p,{children:["\u4f7f\u7528 ",(0,d.jsx)(n.code,{children:"debugfs"})," \u8ddf\u8e2a\u53ef\u4ee5\u66f4\u52a0\u6df1\u5165\u5730\u4e86\u89e3 USB \u7ebf\u4e0a\u53d1\u751f\u7684\u6bcf\u4e00\u4e2a\u4e8b\u52a1\u3002\u5982\u9700\u67e5\u770b\u8ddf\u8e2a\u5217\u8868\uff0c\u53ef\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"]}),"\n",(0,d.jsx)(n.admonition,{type:"warning",children:(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["\u786e\u4fdd\u5df2\u6302\u8f7d ",(0,d.jsx)(n.code,{children:"debugfs"}),"\u3002\u5982\u679c\u5c1a\u672a\u6302\u8f7d\uff0c\u53ef\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u6765\u6302\u8f7d ",(0,d.jsx)(n.code,{children:"debugfs"}),":"]}),"\n",(0,d.jsx)(n.p,{children:(0,d.jsx)(n.code,{children:"mount -t debugfs none /sys/kernel/debug"})}),"\n"]})}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls /sys/kernel/debug/tracing/events/dwc3\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u53ef\u7528\u4e8e\u9a8c\u8bc1 xHCI/gadget \u534f\u8bae\u6808/USB Type-C \u8fde\u63a5\u5668\u7cfb\u7edf\u8f6f\u4ef6\u63a5\u53e3 (UCSI) \u4e2d\u7684\u6570\u636e\u4f20\u8f93\u7684\u8ddf\u8e2a\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"dwc3_alloc_request  dwc3_event              dwc3_gadget_generic_cmd  enable\ndwc3_complete_trb   dwc3_free_request       dwc3_gadget_giveback     filter\ndwc3_ctrl_req       dwc3_gadget_ep_cmd      dwc3_prepare_trb\ndwc3_ep_dequeue     dwc3_gadget_ep_disable  dwc3_readl\ndwc3_ep_queue       dwc3_gadget_ep_enable   dwc3_writel\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u8981\u5217\u51fa xHCI/\u4e3b\u673a\u63a7\u5236\u5668\u9a71\u52a8\u7a0b\u5e8f (HCD) \u4e2d\u7684\u8ddf\u8e2a\u6570\u636e\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls /sys/kernel/debug/tracing/events/xhci-hcd\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u4ee5\u4e0b\u662f\u53ef\u7528\u4e8e\u9a8c\u8bc1 xHCI/HCD \u4e2d\u6570\u636e\u4f20\u8f93\u7684\u8ddf\u8e2a\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"enable                            xhci_handle_cmd_config_ep\nfilter                            xhci_handle_cmd_disable_slot\n  xhci_add_endpoint                 xhci_handle_cmd_reset_dev\n  xhci_address_ctrl_ctx             xhci_handle_cmd_reset_ep\n  xhci_address_ctx                  xhci_handle_cmd_set_deq\n  xhci_alloc_dev                    xhci_handle_cmd_set_deq_ep\n  xhci_alloc_virt_device            xhci_handle_cmd_stop_ep\n  xhci_configure_endpoint           xhci_handle_command\n  xhci_configure_endpoint_ctrl_ctx  xhci_handle_event\n  xhci_dbc_alloc_request            xhci_handle_port_status\n  xhci_dbc_free_request             xhci_handle_transfer\n  xhci_dbc_gadget_ep_queue          xhci_hub_status_data\n  xhci_dbc_giveback_request         xhci_inc_deq\n  xhci_dbc_handle_event             xhci_inc_enq\n  xhci_dbc_handle_transfer          xhci_queue_trb\n  xhci_dbc_queue_request            xhci_ring_alloc\n  xhci_dbg_address                  xhci_ring_ep_doorbell\n  xhci_dbg_cancel_urb               xhci_ring_expansion\n  xhci_dbg_context_change           xhci_ring_free\n  xhci_dbg_init                     xhci_ring_host_doorbell\n  xhci_dbg_quirks                   xhci_setup_addressable_virt_device\n  xhci_dbg_reset_ep                 xhci_setup_device\n  xhci_dbg_ring_expansion           xhci_setup_device_slot\n  xhci_discover_or_reset_device     xhci_stop_device\n  xhci_free_dev                     xhci_urb_dequeue\n  xhci_free_virt_device             xhci_urb_enqueue\n  xhci_get_port_status              xhci_urb_giveback\n  xhci_handle_cmd_addr_dev\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4fbf\u5217\u51fa USB \u89c6\u9891\u7c7b (UVC) gadget \u9a71\u52a8\u7a0b\u5e8f\u7684\u53ef\u7528\u4e8b\u4ef6\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls /sys/kernel/debug/tracing/events/gadget\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"enable                      usb_gadget_activate\n  filter                      usb_gadget_clear_selfpowered\n  usb_ep_alloc_request        usb_gadget_connect\n  usb_ep_clear_halt           usb_gadget_deactivate\n  usb_ep_dequeue              usb_gadget_disconnect\n  usb_ep_disable              usb_gadget_frame_number\n  usb_ep_enable               usb_gadget_giveback_request\n  usb_ep_fifo_flush           usb_gadget_set_remote_wakeup\n  usb_ep_fifo_status          usb_gadget_set_selfpowered\n  usb_ep_free_request         usb_gadget_vbus_connect\n  usb_ep_queue                usb_gadget_vbus_disconnect\n  usb_ep_set_halt             usb_gadget_vbus_draw\n  usb_ep_set_maxpacket_limit  usb_gadget_wakeup\n  usb_ep_set_wedge\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u5982\u9700\u5217\u51fa UCSI \u9a71\u52a8\u7a0b\u5e8f\u4e2d\u7684\u53ef\u7528\u4e8b\u4ef6\uff0c\u53ef\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls /sys/kernel/debug/tracing/events/ucsi\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u968f\u5373\u663e\u793a\u4ee5\u4e0b\u8f93\u51fa\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"enable  ucsi_connector_change  ucsi_register_port  ucsi_run_command\nfilter  ucsi_register_altmode  ucsi_reset_ppm\n"})}),"\n",(0,d.jsx)(n.h3,{id:"usb-\u5bc4\u5b58\u5668\u6253\u5370",children:"USB \u5bc4\u5b58\u5668\u6253\u5370"}),"\n",(0,d.jsxs)(n.p,{children:["USB ",(0,d.jsx)(n.code,{children:"debugfs"})," \u63d0\u4f9b\u4ee5\u4e0b\u4fe1\u606f\uff0c\u4e0b\u9762\u4ee5 Type-C \u63a5\u53e3\u4e3a\u4f8b\u3002"]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u5de5\u4f5c\u6a21\u5f0f"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"cat /sys/kernel/debug/usb/a600000.usb/mode # Type-C \u63a5\u53e3\n"})}),"\n",(0,d.jsx)(n.admonition,{type:"note",children:(0,d.jsxs)(n.blockquote,{children:["\n",(0,d.jsxs)(n.p,{children:["USB 2.0 Type-A \u7684\u5de5\u4f5c\u6a21\u5f0f",(0,d.jsx)(n.code,{children:"cat /sys/kernel/debug/usb/8c00000.usb/qcom_usb2_0_mode"})]}),"\n"]})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"device\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u8bbe\u5907\u6a21\u5f0f\u4e0b\u6240\u6709\u7aef\u70b9\u7684\u72b6\u6001\u548c\u4f20\u8f93\u73af\u5f62\u7f13\u51b2\u533a (TRB) \u961f\u5217\u3002"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u5f53\u524d\u94fe\u8def\u72b6\u6001\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"cat /sys/kernel/debug/usb/a600000.usb/link_state\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa "}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"Sleep\n"})}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u5217\u51fa\u5904\u7406\u5668 (LSP) dump\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"cat /sys/kernel/debug/usb/a600000.usb/lsp_dump\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"GDBGLSP[0] = 0x40000000\nGDBGLSP[1] = 0x00003a80\nGDBGLSP[2] = 0x38200000\nGDBGLSP[3] = 0x00802000\nGDBGLSP[4] = 0x126f1000\nGDBGLSP[5] = 0x3a800018\nGDBGLSP[6] = 0x00000a80\nGDBGLSP[7] = 0xfc03f14a\nGDBGLSP[8] = 0x0b803fff\nGDBGLSP[9] = 0x00000000\nGDBGLSP[10] = 0x000000f8\nGDBGLSP[11] = 0x000000f8\nGDBGLSP[12] = 0x000000f8\nGDBGLSP[13] = 0x000000f8\nGDBGLSP[14] = 0x000000f8\nGDBGLSP[15] = 0x000000f8\n"})}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ls /sys/kernel/debug/usb/a600000.usb\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"ep0in    ep11out  ep14in   ep1out  ep4in   ep6out  ep9in       regdump\nep0out   ep12in   ep14out  ep2in   ep4out  ep7in   ep9out      testmode\nep10in   ep12out  ep15in   ep2out  ep5in   ep7out  link_state\nep10out  ep13in   ep15out  ep3in   ep5out  ep8in   lsp_dump\nep11in   ep13out  ep1in    ep3out  ep6in   ep8out  mode\n"})}),"\n",(0,d.jsxs)(n.p,{children:[(0,d.jsx)(n.code,{children:"regdump"})," \u547d\u4ee4\u63d0\u4f9b\u4ee5\u4e0b\u5bc4\u5b58\u5668\u7684\u5bc4\u5b58\u5668\u7a7a\u95f4\u7684\u5f53\u524d\u72b6\u6001\uff1a "]}),"\n",(0,d.jsxs)(n.ul,{children:["\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u8bbe\u5907\u6a21\u5f0f\u7684\u5bc4\u5b58\u5668\uff0c\u4f8b\u5982 DCTL\u3001DSTS \u548c DCFG"}),"\n"]}),"\n",(0,d.jsxs)(n.li,{children:["\n",(0,d.jsx)(n.p,{children:"\u5168\u5c40\u5bc4\u5b58\u5668\uff0c\u4f8b\u5982 GCTL \u548c GSTS"}),"\n"]}),"\n"]}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"cd /sys/kernel/debug/usb/a600000.usb\ncat regdump\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"GSBUSCFG0 = 0x2222000e\nGSBUSCFG1 = 0x00001700\nGTXTHRCFG = 0x00000000\nGRXTHRCFG = 0x00000000\nGCTL = 0x00102000\nGEVTEN = 0x00000000\nGSTS = 0x7e800000\nGUCTL1 = 0x810c1802\nGSNPSID = 0x5533330a\nGGPIO = 0x00000000\nGUID = 0x00060500\nGUCTL = 0x0d00c010\nGBUSERRADDR0 = 0x00000000\nGBUSERRADDR1 = 0x00000000\nGPRTBIMAP0 = 0x00000000\nGPRTBIMAP1 = 0x00000000\nGHWPARAMS0 = 0x4020400a\nGDBGFIFOSPACE = 0x00420000\nGDBGLTSSM = 0x41090658\nGDBGBMU = 0x20300000\nGPRTBIMAP_HS0 = 0x00000000\nGPRTBIMAP_HS1 = 0x00000000\nGPRTBIMAP_FS0 = 0x00000000\nGPRTBIMAP_FS1 = 0x00000000\nGUCTL2 = 0x0198440d\nVER_NUMBER = 0x00000000\nVER_TYPE = 0x00000000\nGUSB2PHYCFG(0) = 0x00002400\nGUSB2I2CCTL(0) = 0x00000000\nGUSB2PHYACC(0) = 0x00000000\nGUSB3PIPECTL(0) = 0x030e0002\nGTXFIFOSIZ(0) = 0x00000042\nGRXFIFOSIZ(0) = 0x00000305\nGEVNTADRLO(0) = 0xfffff000\nGEVNTADRHI(0) = 0x0000000f\nGEVNTSIZ(0) = 0x00001000\nGEVNTCOUNT(0) = 0x00000000\nGHWPARAMS8 = 0x000007ea\nGUCTL3 = 0x00010000\nGFLADJ = 0x8c80c8a0\nDCFG = 0x00cc08b4\nDCTL = 0x8cf00a00\nDEVTEN = 0x00000257\nDSTS = 0x008a5200\nDGCMDPAR = 0x00000000\nDGCMD = 0x00000000\nDALEPENA = 0x0000000f\nDEPCMDPAR2(0) = 0x00000000\nDEPCMDPAR1(0) = 0xffffe000\nDEPCMDPAR0(0) = 0x0000000f\nDEPCMD(0) = 0x00000006\nOCFG = 0x00000000\nOCTL = 0x00000000\nOEVT = 0x00000000\nOEVTEN = 0x00000000\nOSTS = 0x00000000\n"})}),"\n",(0,d.jsx)(n.h3,{id:"\u4e3b\u673a-sysfs-\u67e5\u8be2",children:"\u4e3b\u673a sysfs \u67e5\u8be2"}),"\n",(0,d.jsx)(n.p,{children:"\u8981\u67e5\u770b\u603b\u7ebf\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"lsusb\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"Bus 002 Device 001: ID 1d6b:0003 Linux Foundation 3.0 root hub\nBus 001 Device 002: ID 03f0:134a HP, Inc Optical Mouse\nBus 001 Device 001: ID 1d6b:0002 Linux Foundation 2.0 root hub\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u4ee5\u4fbf\u5217\u51fa\u5f53\u524d\u76ee\u5f55\u7684\u5185\u5bb9\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"cd /sys/bus/usb/devices/\nls\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"1-0:1.0  1-1  1-1:1.0  2-0:1.0  usb1  usb2\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u8981\u67e5\u770b\u6709\u5173 USB \u8bbe\u5907\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u8bf7\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u3002"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"cat /sys/kernel/debug/usb/devices\n"})}),"\n",(0,d.jsx)(n.p,{children:"\u793a\u4f8b\u8f93\u51fa\uff1a"}),"\n",(0,d.jsx)(n.pre,{children:(0,d.jsx)(n.code,{className:"language-shell",children:"T:  Bus=01 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=480  MxCh= 1\nB:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0\nD:  Ver= 2.00 Cls=09(hub  ) Sub=00 Prot=01 MxPS=64 #Cfgs=  1\nP:  Vendor=1d6b ProdID=0002 Rev= 6.05\nS:  Manufacturer=Linux 6.5.0-rc4 xhci-hcd\nS:  Product=xHCI Host Controller\nS:  SerialNumber=xhci-hcd.0.auto\nC:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA\nI:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub\nE:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms\n\nT:  Bus=01 Lev=01 Prnt=01 Port=00 Cnt=01 Dev#=  2 Spd=1.5  MxCh= 0\nD:  Ver= 2.00 Cls=00(>ifc ) Sub=00 Prot=00 MxPS= 8 #Cfgs=  1\nP:  Vendor=03f0 ProdID=134a Rev= 1.00\nS:  Manufacturer=PixArt\nS:  Product=HP USB Optical Mouse\nC:* #Ifs= 1 Cfg#= 1 Atr=a0 MxPwr=100mA\nI:* If#= 0 Alt= 0 #EPs= 1 Cls=03(HID  ) Sub=01 Prot=02 Driver=usbhid\nE:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=10ms\n\nT:  Bus=02 Lev=00 Prnt=00 Port=00 Cnt=00 Dev#=  1 Spd=5000 MxCh= 1\nB:  Alloc=  0/800 us ( 0%), #Int=  0, #Iso=  0\nD:  Ver= 3.00 Cls=09(hub  ) Sub=00 Prot=03 MxPS= 9 #Cfgs=  1\nP:  Vendor=1d6b ProdID=0003 Rev= 6.05\nS:  Manufacturer=Linux 6.5.0-rc4 xhci-hcd\nS:  Product=xHCI Host Controller\nS:  SerialNumber=xhci-hcd.0.auto\nC:* #Ifs= 1 Cfg#= 1 Atr=e0 MxPwr=  0mA\nI:* If#= 0 Alt= 0 #EPs= 1 Cls=09(hub  ) Sub=00 Prot=00 Driver=hub\nE:  Ad=81(I) Atr=03(Int.) MxPS=   4 Ivl=256ms\n"})})]})}function x(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,d.jsx)(n,{...e,children:(0,d.jsx)(h,{...e})}):h(e)}}}]);